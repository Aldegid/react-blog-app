(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(55)},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),c=n.n(o),s=n(10),u=n(11),l=(n(42),n(9)),i=n(13),m=n(15),p=n(14),d=n(16),f=(n(43),function(){return r.a.createElement("header",{className:"main__header"},r.a.createElement(u.b,{to:"/",className:"logo"},"Cool Story Blog"),r.a.createElement("div",{className:"menu"},r.a.createElement(u.b,{to:"/"},"Home"),r.a.createElement(u.b,{to:"/posts"},"Posts"),r.a.createElement(u.b,{to:"/login"},"Login")))}),b=(n(45),function(){return r.a.createElement("div",{className:"dummy"},r.a.createElement("h1",null,"Welcome to Cool Story Blog"))}),h=n(17),E=(n(46),function(e){var t=e.performPostDelete;return r.a.createElement("button",{className:"blog__button blog__button-del",onClick:t},"Delete Post")}),v=Object(h.f)(function(e){var t=e.title,n=e.body,a=e.id,o=e.history,c=e.performPostDelete,s=e.isLoggedOn;return r.a.createElement("div",{className:"blog__item"},r.a.createElement("h2",{className:"blog__item-header"},t),r.a.createElement("p",{className:"blog__item-content"},n),r.a.createElement("div",{className:"btn-group"},s?r.a.createElement(E,{performPostDelete:c}):null,r.a.createElement("button",{className:"blog__button",onClick:function(){return o.push("/posts/".concat(a))}},"Read More")))}),_=(n(47),function(){return r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),g=n(7),O=function(e){return function(){return function(t){t({type:"FETCH_POSTS_REQUEST"}),e.getAllPosts().then(function(e){return t({type:"FETCH_POSTS_SUCCESS",payload:e})}).catch(function(e){return t({type:"FETCH_POSTS_FAILURE",payload:e})})}}},S=function(e){return function(t){return function(n){n({type:"FETCH_POST_DETAILS_REQUEST"}),e.getPost(t).then(function(e){return n({type:"FETCH_POST_DETAILS_SUCCESS",payload:e})}).catch(function(e){return n({type:"FETCH_POST_DETAILS_FAILURE",payload:e})})}}},y=r.a.createContext(),j=y.Provider,C=y.Consumer,T=function(){return function(e){return function(t){return r.a.createElement(C,null,function(n){return r.a.createElement(e,Object.assign({},t,{blogService:n}))})}}},P=n(23),x=(n(48),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",text:""},n.handleChange=function(e){var t=e.target,a="postadd"===t.name?"text":"title";n.setState(Object(P.a)({},a,t.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.blogService.addPost(n.state.title,n.state.text).then(function(e){return e?n.props.fetchPosts():null}),n.setState({title:"",text:""})},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"post__add"},r.a.createElement("input",{type:"text",onChange:this.handleChange,value:this.state.title,className:"post_add-title post_add-item",placeholder:"post title..."}),r.a.createElement("textarea",{name:"postadd",onChange:this.handleChange,value:this.state.text,className:"post_add-textarea",placeholder:"type you text here"}),r.a.createElement("button",{className:"post_add-button post_add-item"},"Add new post"))}}]),t}(a.Component)),w=T()(Object(s.b)(function(){return function(e){return e}},function(e,t){var n=t.blogService;return Object(g.b)({fetchPosts:O(n)},e)})(x)),L=(n(49),function(){return r.a.createElement("div",{className:"error__container"},r.a.createElement("h2",null,"Oops, something went wrong :("))}),N=(n(50),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).performPostDelete=function(e){n.props.blogService.deletePost(e).then(function(e){return e?n.props.fetchPosts():null})},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPosts()}},{key:"render",value:function(){var e=this,t=this.props,n=t.posts,a=t.isLoaded,o=t.isLoggedOn,c=t.error;return a?c?r.a.createElement(L,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null),r.a.createElement("div",{className:"blog__container"},n.map(function(t){var n=t.body,a=t.title,c=t.id,s=t.body.length>150?"".concat(n.substr(0,120)," ..."):n,u=a.length>40?"".concat(a.substr(0,40)," ..."):a;return r.a.createElement(v,{key:c,title:u,body:s,id:c,performPostDelete:function(){return e.performPostDelete(c)},isLoggedOn:o})}))):r.a.createElement(_,null)}}]),t}(a.Component)),k=T()(Object(s.b)(function(){return function(e){return e}},function(e,t){var n=t.blogService;return Object(g.b)({fetchPosts:O(n)},e)})(N)),D=(n(51),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:""},n.onCommentAdd=function(e){e.preventDefault();var t=n.props,a=t.id,r=t.fetchPostDetails,o=parseInt(a);n.props.blogService.addComment(o,n.state.value).then(function(e){return e?r(a):null}),n.setState({value:""})},n.onHandleChange=function(e){var t=e.target;n.setState({value:t.value})},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPostDetails(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.error;return t?n?r.a.createElement(L,null):r.a.createElement("div",{className:"post__details"},r.a.createElement("h2",{className:"post__details-header"},t.title),r.a.createElement("p",{className:"post__details-content"},t.body),r.a.createElement("h3",null,"Comments:"),r.a.createElement("ul",{className:"post__details-list"},t.comments.map(function(e){return r.a.createElement("li",{className:"post__details-item",key:e.id},e.body)})),r.a.createElement("form",{onSubmit:this.onCommentAdd},r.a.createElement("textarea",{name:"comment",id:"comment",value:this.state.value,onChange:this.onHandleChange,className:"post__details-textarea",required:!0}),r.a.createElement("button",{className:"post__details-button"},"Add Comment"))):r.a.createElement(_,null)}}]),t}(a.Component)),A=T()(Object(s.b)(function(e){return e},function(e,t){var n=t.blogService;return Object(g.b)({fetchPostDetails:S(n)},e)})(D)),F=(n(52),Object(s.b)(function(e){return{loginButtonValue:e.loginButtonValue}},function(e){return{performLog:function(){return e({type:"PERFORM_LOGIN"})}}})(function(e){var t=e.loginButtonValue,n=e.performLog;return r.a.createElement("div",{className:"login"},r.a.createElement("h2",null,"Please log in to be able to delete posts."),r.a.createElement("button",{type:"button",className:"login__button",onClick:n},t))})),B=(n(53),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(f,null),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",component:b,exact:!0}),r.a.createElement(h.a,{path:"/posts",component:k,exact:!0}),r.a.createElement(h.a,{path:"/login",component:F}),r.a.createElement(h.a,{path:"/posts/:id",render:function(e){var t=e.match.params.id;return r.a.createElement(A,{id:t})}})))}}]),t}(a.Component)),H=n(32),R=n(18),I=function(e,t){if(void 0===e)return{posts:[],post:null,isLoaded:!1,error:!1,isLoggedOn:!1,loginButtonValue:"Login"};switch(t.type){case"FETCH_POSTS_REQUEST":return Object(R.a)({},e);case"FETCH_POSTS_SUCCESS":return Object(R.a)({},e,{posts:t.payload,isLoaded:!0,error:!1});case"FETCH_POSTS_ERROR":return Object(R.a)({},e,{posts:[],isLoaded:!1,error:!0});case"FETCH_POST_DETAILS_REQUEST":return Object(R.a)({},e);case"FETCH_POST_DETAILS_SUCCESS":return Object(R.a)({},e,{isLoaded:!0,post:t.payload});case"FETCH_POST_DETAILS_FAILURE":return Object(R.a)({},e,{post:null,error:!0});case"PERFORM_LOGIN":return Object(R.a)({},e,{isLoggedOn:e.isLoggedOn=!e.isLoggedOn,loginButtonValue:"Login"===e.loginButtonValue?"Logout":"Login"});default:return e}},U=Object(g.c)(I,Object(g.a)(H.a)),V=n(8),M=n.n(V),J=n(19),Q=new function e(){var t=this;Object(l.a)(this,e),this._apiBase="https://simple-blog-api.crew.red",this.getAllPosts=Object(J.a)(M.a.mark(function e(){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase,"/posts"));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)})),this.getPost=function(){var e=Object(J.a)(M.a.mark(function e(n){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase,"/posts/").concat(n,"?_embed=comments"));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error(a.statusText);case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.addComment=function(){var e=Object(J.a)(M.a.mark(function e(n,a){var r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:n,body:a})});case 2:if(201===(r=e.sent).status){e.next=5;break}throw new Error(r.statusText);case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.addPost=function(){var e=Object(J.a)(M.a.mark(function e(n,a){var r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase,"/posts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,body:a})});case 2:if(201===(r=e.sent).status){e.next=5;break}throw new Error(r.statusText);case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.deletePost=function(){var e=Object(J.a)(M.a.mark(function e(n){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase,"/posts/").concat(n),{method:"DELETE"});case 2:if(200===(a=e.sent).status){e.next=5;break}throw new Error(a.statusText);case 5:return e.next=7,a.json;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};c.a.render(r.a.createElement(s.a,{store:U},r.a.createElement(j,{value:Q},r.a.createElement(u.a,null,r.a.createElement(B,null)))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.38fc94ac.chunk.js.map